<!DOCTYPE html>
<html lang="id-ID">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width">
    <meta name="google-site-verification" content="qMqQROYQaYZMrlMxnronbkhUycW3pBOAEH1QqdAbW1s" />
    <meta name="msvalidate.01" content="CEE7BB7D58F4339402A05A52C8D91A35" />
    <meta name="description"
        content="Hundreds of free tutorials for cutting edge languages and frameworks.">
    
    <meta name="author" content="Wisnu Saputra">
    <meta property="og:site_name" content="CoTutorial" />

    <title>Learning Generics in Rust | CoTutorial</title>


    <link rel="icon" type="image/png" href="https://images.tutorialedge.net/images/favicon.ico">
    <link media="all" defer rel="stylesheet" href="https://use.typekit.net/jnu8xif.css">
    <link media="all" defer href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous">
    <link media="all" defer rel="stylesheet" href="https://cotutorial.github.io/css/style.css"> 
    <meta name="generator" content="Hugo 0.57.2" />
    <script src="../../js/jquery-3.4.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"
        integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o"
        crossorigin="anonymous"></script>
    <meta content='100023577212451' property='fb:admins' />
    <meta content="493615514813695" property="fb:app_id" />

</head>

<body>
    <div id="dynamicApp">
        <nav class="navbar navbar-expand-lg">
            
            <a class="navbar-brand" href="../../">
                <img alt="tutorialedge logo" src="../../images/svg/logo.svg" alt="CoTutorial">
                <span>CoTutorial</span>
            </a>
            

            
            <button class="navbar-toggler text-white" type="button" data-toggle="collapse"
                data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <img src="../../images/svg/hamburger.svg" alt="hamburger menu" />
            </button>
            

            <div class="collapse navbar-collapse justify-content-between" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/angular/"><img alt="angular logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/angular.svg" /> Angular</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/typescript/"><img alt="angular logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/typescript.png" /> TypeScript</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/cloud/"><img alt="cloud logo"
                                src="data:image/png.svg;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/cloud.svg" /> Cloud</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/python/"><img alt="python logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/python.svg" />Python</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/golang/"><img alt="golang logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/golang.svg" />Golang</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/rust/"><img alt="rust logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/rust-logo.png" />Rust</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/webdev/"><img alt="webdev logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="../../images/svg/logo.svg" />Web Dev</a>
                    </li>
                </ul>

            </div>
        </nav>


<div class="top-bar">
    <div class="container">
        <h1>
            
            <img src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-src="https://images.tutorialedge.net/images/rust-logo.png" alt="Learning Generics in Rust Image" />  Learning Generics in Rust
        </h1>
        <div class="post-info">
            <div class="post-info-inner">
                <span>
            
            <img class="author" src="../../images/svg/logo.svg" alt="TutorialEdge Logo" />
            
            <a href="https://twitter.com/TutorialEdge">Andrew Johnson</a>
          </span>

                <span><img class="icon" src="https://tutorialedge.net/images/svg/clock.svg" alt="clock"/>8 Minutes</span>
                <span><img class="icon" src="https://tutorialedge.net/images/svg/calendar.svg" alt="clock"/> Sep 1, 2018</span>

                <span>
            
            <a href="../../tags/rust"
              ><span class="badge badge-pill badge-info">rust</span></a>
                
                </span>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="content-container">
        <div class="row">

            <div class="d-none d-sm-none col-sm-3 d-md-block">
                <div class="sidebar">
                    <div id="sidebar small-no-show">

  <div class="right-sidebar youtube-subscribe">
    <h3>Site Sponsors</h3>
    <a href="#"><img class="patron" src="https://images.tutorialedge.net/images/DigitalOcean.png" style="width: 100%; height: auto; margin: 0; " alt="Amazing Site Sponsors!"/></a>
    <hr/>
    <h3>Support The Site</h3>
    <a href="#"><img class="patron" src="https://images.tutorialedge.net/images/patreon.png" alt="become a patron"/></a>
    <div class="clear"></div>
    <a href="#"><img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee" style="height: auto !important;width: auto !important;" ></a>
  </div>


  <div class="right-sidebar small-no-show">
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    <h4 style="text-transform: uppercase;">beginner</h4>
    <ul class="collection">
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      <li class="collection-item"><a href="https://cotutorial.github.io/rust/scope-ownership-in-rust/">Scope and Ownership in Rust</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    <h4 style="text-transform: uppercase;">books</h4>
    <ul class="collection">
      
      
      <li class="collection-item"><a href="https://cotutorial.github.io/rust/best-books-for-learning-rust/">The Top Programming Books for Learning Rust</a></li>
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      
    </ul>
    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    

    
    <h4 style="text-transform: uppercase;">json</h4>
    <ul class="collection">
      
      
      <li class="collection-item"><a href="https://cotutorial.github.io/rust/rust-working-with-json-tutorial/">Working with JSON in Rust - Tutorial</a></li>
      
      
      
      
    </ul>
    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    

    
    
  </div>

</div>
                </div>
            </div>

            <div class="col-sm-9 col-md-7">
                <article class="content" v-pre>
                    

<p>Generics are a facility to write code for multiple contexts with different
types, and parameterization allows the programmer to write code that makes fewer
assumptions about the data structures and code segments involved in the code&rsquo;s
definition.</p>

<p>For example, a very ambiguous concept would be the concept of addition. When a
programmer writes <code>a + b</code>, what does that mean? In Rust, the <code>Add</code> trait can be
implemented for just about any type. As long as there is an implementation for
the <code>Add</code> trait in scope that is compatible with the types of a and b, this
trait will define the operation.</p>

<p>In this pattern, you can write generic code that defines a concept in its most
abstract terms, allowing for later definitions of data and methods to interface
with that code without change.</p>

<p>A major example of completely generic code is built-in container data
structures. Vectors and HashMaps must necessarily know the types of the objects
they store. However, it would be very limiting if any assumptions were made
about the underlying data structure or methods for the stored items.</p>

<p>Therefore, parameterization of containers allows the container and its methods
to explicitly declare trait bounds that are expected from stored types. All
other characteristics of the stored item will be parameterized.</p>

<h1 id="investigating-generics">Investigating generics</h1>

<p>Generics refer to the practice of parameterizing classes in object-oriented
programming (OOP) languages. Rust does not have an exact equivalent of classes.
However, the concept of datatypes paired with a trait is very similar to a class
if used in that sense. So, in Rust, generics would refer to the parameterization
of datatypes and traits. Choosing a common example from OOP, look at the animal
kingdom. In the following code, you can define some animals and the actions that
they can take. First, define two animals:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Cat</span>
{
   weight: <span style="color:#66d9ef">f64</span>,
   speed: <span style="color:#66d9ef">f64</span>
}

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Dog</span>
{
   weight: <span style="color:#66d9ef">f64</span>,
   speed: <span style="color:#66d9ef">f64</span>
}
</code></pre></div>
<p>Now, define an <code>animal trait</code> and its implementations. All animals will have the
<code>max_speed</code> method. Here is the code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">trait</span> Animal
{
   <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">max_speed</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">f64</span>;
}

<span style="color:#66d9ef">impl</span> Animal <span style="color:#66d9ef">for</span> Cat
{
   <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">max_speed</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">f64</span>
   {
      self.speed
   }
}

<span style="color:#66d9ef">impl</span> Animal <span style="color:#66d9ef">for</span> Dog
{
   <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">max_speed</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">f64</span>
   {
      self.speed
   }
}
</code></pre></div>
<p>Here, you have defined the Rust equivalent of interfaces from OOP. However, you
have not parameterized anything, so nothing here should be considered generic.
You can add the code for a trait defining the concept of an animal chasing a
toy. First, define the concept of the toy. This will follow the same OOP-like
pattern as in the preceding code:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">SqueakyToy</span>
{
   weight: <span style="color:#66d9ef">f64</span>
}

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">Stick</span>
{
   weight: <span style="color:#66d9ef">f64</span>
}

<span style="color:#66d9ef">trait</span> Toy
{
   <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">weight</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">f64</span>;
}

<span style="color:#66d9ef">impl</span> Toy <span style="color:#66d9ef">for</span> SqueakyToy
{
   <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">weight</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">f64</span>
   {
      self.weight
   }
}

<span style="color:#66d9ef">impl</span> Toy <span style="color:#66d9ef">for</span> Stick
{
   <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">weight</span>(<span style="color:#f92672">&amp;</span>self) -&gt; <span style="color:#66d9ef">f64</span>
   {
      self.weight
   }
}
</code></pre></div>
<p>Now, you have two traits, each having two possible implementations. Define an
action for an animal chasing the toy. More than one possible animal has been
defined and more than one possible toy, so you’ll need to use a generic
definition.</p>

<p>The struct definition also constrains each parameter with a trait bound, which
adds additional information to the <code>struct</code>; now, you can guarantee that each
animal will implement the <code>Animal</code> trait and similarly, each toy will implement
<code>Toy</code>. You can also define some associated logic that uses the parameterized
traits&rsquo; methods. The code is as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">AnimalChasingToy</span><span style="color:#f92672">&lt;</span>A: <span style="color:#a6e22e">Animal</span>, T: <span style="color:#a6e22e">Toy</span><span style="color:#f92672">&gt;</span>
{
   animal: <span style="color:#a6e22e">A</span>,
   toy: <span style="color:#a6e22e">T</span>
}

<span style="color:#66d9ef">trait</span> AnimalChasesToy<span style="color:#f92672">&lt;</span>A: <span style="color:#a6e22e">Animal</span>, T: <span style="color:#a6e22e">Toy</span><span style="color:#f92672">&gt;</span>
{
   <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">chase</span>(<span style="color:#f92672">&amp;</span>self);
}

<span style="color:#66d9ef">impl</span><span style="color:#f92672">&lt;</span>A: <span style="color:#a6e22e">Animal</span>, T: <span style="color:#a6e22e">Toy</span><span style="color:#f92672">&gt;</span> AnimalChasesToy<span style="color:#f92672">&lt;</span>A, T<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">for</span> AnimalChasingToy<span style="color:#f92672">&lt;</span>A, T<span style="color:#f92672">&gt;</span>
{
   <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">chase</span>(<span style="color:#f92672">&amp;</span>self)
   {
      println<span style="color:#f92672">!</span>(<span style="color:#e6db74">&#34;chase&#34;</span>)
   }
}
</code></pre></div>
<p>At this point, you have defined a generic <code>struct</code> and <code>trait</code> that accepts
types, knowing only some limited information regarding the traits of each
object. Multiple traits or none can be specified to declare all expected
interfaces. Multiple traits or lifetime bounds can be declared with the
<code>'l + Trait1 + Trait2</code> syntax.</p>

<h1 id="investigating-generalized-algebraic-datatypes">Investigating generalized algebraic datatypes</h1>

<p>Sometimes, it is desirable to have the type system carry more information than
normal. If you look at the process of compilation, types occupy a space between
the program code and the program executable. The code can take the form of text
files before compilation or an abstract syntax tree such as those manipulated by
Rust macros. Program executables consist of the resulting combination of all
Rust primitives like expressions, functions, datatypes, traits, and so on.</p>

<p>Right in the middle, it is possible to introduce a new concept called
<strong>algebraic data types (ADTs)</strong>. ADTs are technically an extension of Rust
primitives, though it is important to note how much extra type information is
used for ADTs. This technique involves preserving extra type information into
the executable.</p>

<p>Extra run time decision-making is a step towards dynamic typing and foregoes
optimizations available to static compilation. The result is a somewhat less
efficient programming primitive, but also a primitive that can describe concepts
that are otherwise difficult to approach.</p>

<p>Now, look at one example—deferred computation. When you describe a relation of
different values and expressions, you normally just write this code into the
program directly. However, what would you do if you wanted to separate the code
step from the execution step? To accomplish this, start building something
called a <strong>domain-specific language</strong>.</p>

<p>For a concrete example, consider that you are building a JIT (dynamically
compiled) interpreter for JavaScript. The Mozilla project has several projects
dedicated to JS engines built in Rust
(<a href="https://blog.mozilla.org/javascript/2017/10/20/holyjit-a-new-hope/">https://blog.mozilla.org/javascript/2017/10/20/holyjit-a-new-hope/</a>). This is a
real application for which Rust is well-suited. To use an ADT in a JIT compiled
interpreter, you want two things:</p>

<ul>
<li>To evaluate ADT expressions directly within the interpreter</li>
<li>To compile ADT expressions if selected for compilation</li>
</ul>

<p>So, any part of your JavaScript expressions can either be interpreted or
compiled at any time. If an expression is compiled, then you want all further
evaluations to use the compiled version. The key to implement this cleanly is to
put some extra weight on the type system. These heavy type definitions are the
essence of the ADT concept. Here is a definition of a very small subset of
JavaScript using an ADT:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">JSJIT</span>(<span style="color:#66d9ef">u64</span>);

<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">JSJITorExpr</span> {
   Jit { label: Box<span style="color:#f92672">&lt;</span>JSJIT<span style="color:#f92672">&gt;</span> },
   Expr { expr: Box<span style="color:#f92672">&lt;</span>JSExpr<span style="color:#f92672">&gt;</span> }
}

<span style="color:#66d9ef">enum</span> <span style="color:#a6e22e">JSExpr</span> {
   Integer { value: <span style="color:#66d9ef">u64</span> },
   String { value: String },
   OperatorAdd { lexpr: Box<span style="color:#f92672">&lt;</span>JSJITorExpr<span style="color:#f92672">&gt;</span>, rexpr: Box<span style="color:#f92672">&lt;</span>JSJITorExpr<span style="color:#f92672">&gt;</span> },
   OperatorMul { lexpr: Box<span style="color:#f92672">&lt;</span>JSJITorExpr<span style="color:#f92672">&gt;</span>, rexpr: Box<span style="color:#f92672">&lt;</span>JSJITorExpr<span style="color:#f92672">&gt;</span> }
}
</code></pre></div>
<p>Here, you can see that each intermediate expression has enough information to be
evaluated, but also has enough information to be compiled. You could have easily
wrapped the Add or Mul operator into closures, but that would disallow JIT
optimization. You need to maintain the full representation here in order to
permit JIT compilation.</p>

<p>Also, note the indirection between each point where the program decides whether
to evaluate an expression or to call into compiled code.</p>

<p>The next step is to implement an evaluation program for each expression form.
You could break this into traits or define the evaluation as one larger
function. To keep the functional style, you can define a single function. To
evaluate an expression, you can use a pattern match on the JSJITorExpr
expression.</p>

<p>This JIT expression breaks down into either a code address which is run by
calling the jump function or an expression which must be evaluated dynamically.
This pattern gives you the best of both worlds, mixing compiled code and
interpreted code together. The code is as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">jump</span>(l: <span style="color:#a6e22e">JSJIT</span>) -&gt; <span style="color:#a6e22e">JSJITorExpr</span>
{
   <span style="color:#75715e">//jump to compiled code
</span><span style="color:#75715e"></span>   <span style="color:#75715e">//this depends on implementation
</span><span style="color:#75715e"></span>   <span style="color:#75715e">//so we will just leave this as a stub
</span><span style="color:#75715e"></span>   JSJITorExpr::Jit { label: <span style="color:#a6e22e">JSJIT</span>(<span style="color:#ae81ff">0</span>) }
}

<span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">eval</span>(e: <span style="color:#a6e22e">JSJITorExpr</span>) -&gt; <span style="color:#a6e22e">JSJITorExpr</span>
{
   <span style="color:#66d9ef">match</span> e
   {
      JSJITorExpr::Jit { label: <span style="color:#a6e22e">label</span> } <span style="color:#f92672">=&gt;</span> jump(label),
      JSJITorExpr::Expr { expr: <span style="color:#a6e22e">expr</span> } <span style="color:#f92672">=&gt;</span> {
         <span style="color:#66d9ef">let</span> rawexpr <span style="color:#f92672">=</span> <span style="color:#f92672">*</span>expr;
         <span style="color:#66d9ef">match</span> rawexpr
         {
            JSExpr::Integer {..} <span style="color:#f92672">=&gt;</span> JSJITorExpr::Expr { expr: Box::new(rawexpr) },
            JSExpr::String {..} <span style="color:#f92672">=&gt;</span> JSJITorExpr::Expr { expr: Box::new(rawexpr) },
            JSExpr::OperatorAdd { lexpr: <span style="color:#a6e22e">l</span>, rexpr: <span style="color:#a6e22e">r</span> } <span style="color:#f92672">=&gt;</span> {
               <span style="color:#66d9ef">let</span> l <span style="color:#f92672">=</span> eval(<span style="color:#f92672">*</span>l);
               <span style="color:#66d9ef">let</span> r <span style="color:#f92672">=</span> eval(<span style="color:#f92672">*</span>r);
               <span style="color:#75715e">//call add op codes for possible l,r representations
</span><span style="color:#75715e"></span>               <span style="color:#75715e">//should return wrapped value from above
</span><span style="color:#75715e"></span>               JSJITorExpr::Jit { label: <span style="color:#a6e22e">JSJIT</span>(<span style="color:#ae81ff">0</span>) }
            }
            JSExpr::OperatorMul { lexpr: <span style="color:#a6e22e">l</span>, rexpr: <span style="color:#a6e22e">r</span> } <span style="color:#f92672">=&gt;</span> {
               <span style="color:#66d9ef">let</span> l <span style="color:#f92672">=</span> eval(<span style="color:#f92672">*</span>l);
               <span style="color:#66d9ef">let</span> r <span style="color:#f92672">=</span> eval(<span style="color:#f92672">*</span>r);
               <span style="color:#75715e">//call mul op codes for possible l,r representations
</span><span style="color:#75715e"></span>               <span style="color:#75715e">//should return wrapped value from above
</span><span style="color:#75715e"></span>               JSJITorExpr::Jit { label: <span style="color:#a6e22e">JSJIT</span>(<span style="color:#ae81ff">0</span>) }
            }
         }
      }
   }
}
</code></pre></div>
<p>Another example of the ADT concept is in heterogeneous lists. Heterogeneous
lists are not like other generic containers, such as vectors. Rust vectors are
homogeneous, meaning all items are required to have the same type. By
comparison, a heterogeneous list can have any mix of types of elements. This may
sound like a tuple, but tuples have a fixed length and flat type signature.</p>

<p>Similarly, heterogeneous lists must have a length and type signature known at
compile time, but that knowledge can be achieved incrementally. Heterogeneous
lists are permitted to work with partial knowledge of the list type,
parameterizing the knowledge that they do not need.</p>

<p>Here is an example implementation of a heterogeneous list:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">trait</span> HList: Sized {}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">HNil</span>;
<span style="color:#66d9ef">impl</span> HList <span style="color:#66d9ef">for</span> HNil {}

<span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">HCons</span><span style="color:#f92672">&lt;</span>H, T<span style="color:#f92672">&gt;</span> {
   <span style="color:#66d9ef">pub</span> head: <span style="color:#a6e22e">H</span>,
   <span style="color:#66d9ef">pub</span> tail: <span style="color:#a6e22e">T</span>,
}
<span style="color:#66d9ef">impl</span><span style="color:#f92672">&lt;</span>H, T: <span style="color:#a6e22e">HList</span><span style="color:#f92672">&gt;</span> HList <span style="color:#66d9ef">for</span> HCons<span style="color:#f92672">&lt;</span>H, T<span style="color:#f92672">&gt;</span> {}
<span style="color:#66d9ef">impl</span><span style="color:#f92672">&lt;</span>H, T<span style="color:#f92672">&gt;</span> HCons<span style="color:#f92672">&lt;</span>H, T<span style="color:#f92672">&gt;</span> {
   <span style="color:#66d9ef">pub</span> <span style="color:#66d9ef">fn</span> <span style="color:#a6e22e">pop</span>(self) -&gt; (H, T) {
      (self.head, self.tail)
   }
}
</code></pre></div>
<p>Notice how this definition intentionally uses a trait to obscure type
information, without which, such a definition would be impossible. A declaration
of <code>HList</code> would look as follows:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-rust" data-lang="rust"><span style="color:#66d9ef">let</span> hl <span style="color:#f92672">=</span> HCons {
   head: <span style="color:#ae81ff">2</span>,
   tail: <span style="color:#a6e22e">HCons</span> {
      head: <span style="color:#e6db74">&#34;abcd&#34;</span>.to_string(),
      tail: <span style="color:#a6e22e">HNil</span>
   }
};

<span style="color:#66d9ef">let</span> (h1,t1) <span style="color:#f92672">=</span> hl.pop();
<span style="color:#66d9ef">let</span> (h2,t2) <span style="color:#f92672">=</span> t1.pop();
<span style="color:#75715e">//this would fail
</span><span style="color:#75715e">//HNil has no .pop method
</span><span style="color:#75715e">//t2.pop();
</span></code></pre></div>
<p>Rust can be a bit rigid with regards to type checking, at times. However, there
are also many workarounds that permit complex behavior that might seem
impossible at first.</p>

<blockquote>
<p>If you found this article interesting, you can explore Andrew Johnson’s
<a href="https://amzn.to/2osWQaz">Hands-On Functional Programming in RUST</a> to explore
the support Rust offers for creating functional applications in Rust. This
book will help you discover all the Rust features that can be used to build
software in a functional way.</p>
</blockquote>
 
<div class="author-container">
  <div class="author-image">
    
    <img src="../../images/svg/logo.svg" alt="Andrew Johnson" />
    
  </div>
  <div class="author-info">
    <h2>
      Andrew Johnson<br />
      <small
        >Twitter: <a href="https://twitter.com/TutorialEdge">@CoTutorial</a></small
      >
    </h2>
    <p>
      Hey, I'm Elliot and I've been working on TutorialEdge for the last 4 years! If my work has helped you in any way, shape, or form then please consider supporting my work.
    </p>

    <a style="float: left; margin-right: 10px;" href="#"><img class="patron" src="https://images.tutorialedge.net/images/patreon.png" alt="become a patron"/></a>
    <a style="float: left;" href="#"><img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee" style="height: auto !important;width: auto !important;" ></a>
    
  </div>
</div>


                </article>
                <div class="comments">
          <div class="content">
    
    
    

    <script>
        function loadAPI() {
            var js = document.createElement('script');
            js.src = '//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v4.0&appId=493615514813695&autoLogAppEvents=1';
            document.body.appendChild(js);
        }
        window.onscroll = function () {
            var rect = document.getElementById('comments').getBoundingClientRect();
            if (rect.top < window.innerHeight) {
                loadAPI();
                window.onscroll = null;
            } 
        }
        </script>
    <div id="fb-root"></div>
    <div class="fb-comments comments" id="comments" data-href="https://cotutorial.github.io/rust/learning-generics-in-rust/" data-width="100%" data-numposts="5"></div>                  
</div>

        </div>
            </div>

            <div class="col-sm-3 col-md-2">
                <div id="right-sidebar">
                    <div class="toc">
                        <h4>Table Of Contents</h4>
                        <nav id="TableOfContents">
<ul>
<li><a href="#investigating-generics">Investigating generics</a></li>
<li><a href="#investigating-generalized-algebraic-datatypes">Investigating generalized algebraic datatypes</a></li>
</ul>
</nav>
                    </div>
                    <hr/>
                    <div id="codefund">
                        
                    </div>
                    <script src="https://codefund.io/properties/330/funder.js" async="async"></script>
                    <div class="clear"></div>
                </div>
            </div>

        </div>
    </div>
</div>


<script src="../../js/sticky-sidebar.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.0/anchor.min.js"></script>
<script>
    
    document.addEventListener("DOMContentLoaded", function(event) {
        var sidebar = new StickySidebar("#right-sidebar", {
            topSpacing: 10
        });
        anchors.options = {
            visible: "always",
            placement: "left"
        };
        anchors.add(
            ".content > h1, .content > h2, .content > h3, .content > h4"
        );
    });
</script>


<div class="blue-spacer"></div>

<footer class="page-footer">
    <div class="row">
        <div class="col l3 m6 s12">
            <div class="padded">
                <h3>Courses</h3>
                <ul>
                    <li><a href="https://cotutorial.github.io/python/">Python</a></li>
                    <li><a href="https://cotutorial.github.io/angular/">Angular</a></li>
                    <li><a href="https://cotutorial.github.io/golang/">Golang</a></li>
                    <li><a href="https://cotutorial.github.io/artificial-intelligence/">Artificial Intelligence</a></li>
                    <li><a href="https://cotutorial.github.io/webdev/">Web Development</a></li>
                </ul>
            </div>
        </div>
        <div class="col l3 m6 s12">
            <div class="padded">
                <h3>Quick Links</h3>

                <ul>
                    <li><a href="https://cotutorial.github.io/search/">Search Page</a></li>
                    <li><a href="https://cotutorial.github.io/about/">About</a></li>
                    <li><a href="https://cotutorial.github.io/get-involved/">Get Involved</a></li>
                </ul>
                <h3>Suggested Resources</h3>
                <ul>
                    <li><a href="https://cotutorial.github.io/uses/">My Hardware + Software Recording Setup </a></li>
                </ul>
            </div>
        </div>
        <div class="col l3 m6 s12">
            <div class="padded">
                <h3>Follow Me</h3>
                <ul>
                    <li><a href="https://twitter.com/wisnusaputradev">@wisnusaputradev</a></li>
                    <li><a href="https://www.facebook.com/wisnusaputradev">Wisnu Saputra</a></li>
                    <li><a href="https://github.com/saputrago">saputrago</a></li>
                </ul>
            </div>
        </div>
        <div class="col l3 m12 s12 footer-special">
            <div class="logo">
                <a href="https://cotutorial.github.io/"><img alt="tutorialedge logo" src="../../images/svg/logo.svg" /> CoTutorial</a>
            </div>
            <div class="padded">
                <p>CoTutorial is a totally free programming tutorial site that has been built with the intention of helping as many people as possible learn to program. The site is also completely opensourced and you can contribue here: <a href="https://github.com/saputrago">Project</a>,
                    any pull requests will be greatly appreciated!</p>
            </div>
        </div>
    </div>
    <div class="footer-copyright none">
        <span class="float-left">CoTutorial © 2019 Copyright</span>
        <span class="float-right" id="page-id">5480ff3c2e5c132baecf77ad45c27660</span>
    </div>
</footer>



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-10255990-23"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-10255990-23');
</script>
<script type="text/javascript">
    function init() {
        var imgDefer = document.getElementsByTagName('img');
        
        
        
        
        
        for (var i = 0; i < imgDefer.length; i++) {
            if (imgDefer[i].getAttribute('data-src')) {
                imgDefer[i].setAttribute('src', imgDefer[i].getAttribute('data-src'));
            }
        }

    }

    window.onload = init;
</script>

</div>
</body>

</html>