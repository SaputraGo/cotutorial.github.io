<!DOCTYPE html>
<html lang="id-ID">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width">
    <meta name="google-site-verification" content="o0UedRQqZULbVZPe6SPx1VD1YxJd6WL-2-15-XHWS1g" />
    <meta name="msvalidate.01" content="479C48823705295AF4454A1704545592" />
    <meta name="description"
        content="Hundreds of free tutorials for cutting edge languages and frameworks.">
    
    <meta name="author" content="Wisnu Saputra">
    <meta property="og:site_name" content="CoTutorial" />

    <title>Typescript REST API And MongoDB Beginners Tutorial | CoTutorial</title>


    <link rel="icon" type="image/png" href="https://images.tutorialedge.net/images/favicon.ico">
    <link media="all" defer rel="stylesheet" href="https://use.typekit.net/jnu8xif.css">
    <link media="all" defer href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        rel="stylesheet" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T"
        crossorigin="anonymous">
    <link media="all" defer rel="stylesheet" href="https://cotutorial.github.io/css/style.css"> 
    <meta name="generator" content="Hugo 0.57.2" />
    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <script src="../../js/jquery-3.4.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.bundle.min.js"
        integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o"
        crossorigin="anonymous"></script>
    <meta content='100023577212451' property='fb:admins' />
    <meta content="493615514813695" property="fb:app_id" />

</head>

<body>
    <div id="dynamicApp">
        <nav class="navbar navbar-expand-lg">
            
            <a class="navbar-brand" href="../../">
                <img alt="tutorialedge logo" src="../../images/svg/logo.svg" alt="CoTutorial">
                <span>CoTutorial</span>
            </a>
            

            
            <button class="navbar-toggler text-white" type="button" data-toggle="collapse"
                data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false"
                aria-label="Toggle navigation">
                <img src="../../images/svg/hamburger.svg" alt="hamburger menu" />
            </button>
            

            <div class="collapse navbar-collapse justify-content-between" id="navbarSupportedContent">
                <ul class="navbar-nav ml-auto">
                    
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="courseDropdown" role="button"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Courses
                        </a>
                        <div class="dropdown-menu" aria-labelledby="courseDropdown">
                            <a class="dropdown-item" href="../../artificial-intelligence/"><img alt="AI logo"
                                    src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="https://images.tutorialedge.net/images/ai.png" />AI</a>
                            <a class="dropdown-item" href="../../angular/"><img alt="angular logo"
                                    src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="https://images.tutorialedge.net/images/angular.svg" />Angular</a>
                            <a class="dropdown-item" href="../../cloud/"><img alt="cloud logo"
                                    src="data:image/png.svg;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="https://images.tutorialedge.net/images/cloud.svg" />Cloud</a>
                            <a class="dropdown-item" href="../../compsci/"><img alt="computer science"
                                    src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="../../images/svg/logo.svg" />Computer Science</a>
                            <a class="dropdown-item" href="../../python/"><img alt="python logo"
                                    src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="https://images.tutorialedge.net/images/python.svg" />Python</a>
                            <a class="dropdown-item" href="../../golang/"><img alt="golang logo"
                                    src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="https://images.tutorialedge.net/images/golang.svg" />Golang</a>
                            <a class="dropdown-item" href="../../rust/"><img alt="rust logo"
                                    src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="https://images.tutorialedge.net/images/rust-logo.png" />Rust</a>
                            <a class="dropdown-item" href="../../webdev/"><img alt="webdev logo"
                                    src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="../../images/svg/logo.svg" />Web Dev
                            </a>
                        </div>
                    </li>
                    

                    
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="courseDropdown" role="button"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Projects
                        </a>
                        <div class="dropdown-menu" aria-labelledby="courseDropdown">
                            <a class="dropdown-item" href="https://cotutorial.github.io/projects/hacker-news-clone-vuejs/"><img
                                    alt="VueJS logo" src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="https://images.tutorialedge.net/images/vuejs.svg" />HackerNews Clone in
                                VueJS</a>
                            <a class="dropdown-item"
                                href="https://cotutorial.github.io/projects/building-blog-with-vuejs-aws/"><img alt="VueJS logo"
                                    src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="https://images.tutorialedge.net/images/vuejs.svg" />Building a VueJS Blog
                                on AWS</a>
                            <a class="dropdown-item"
                                href="https://cotutorial.github.io/projects/chat-system-in-go-and-react/"><img alt="VueJS logo"
                                    src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                    data-src="https://images.tutorialedge.net/images/golang.svg" />Building a Chat
                                Application in Go and React</a>
                        </div>
                    </li>
                    

                    
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" id="tutorialDropdown" role="button"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            Tutorials
                        </a>
                        <div class="dropdown-menu dropdown-menu-mega" aria-labelledby="tutorialDropdown">
                            <div class="row">
                                <div class="col-sm-6">
                                    <a class="dropdown-item" href="https://cotutorial.github.io/artificial-intelligence/"><img
                                            alt="AI logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="https://images.tutorialedge.net/images/ai.png" /> AI</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/typescript/angular/"><img
                                            alt="Angular logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="https://images.tutorialedge.net/images/angular.svg" />Angular</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/javascript/angularjs/"><img
                                            alt="AngularJS logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="https://images.tutorialedge.net/logos/angularjs.svg" />
                                        AngularJS</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/cloud/"><img alt="Cloud logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="https://images.tutorialedge.net/images/cloud.svg" /> Cloud</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/compsci/"><img
                                            alt="Comp Sci logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="../../images/svg/logo.svg" /> Comp Sci</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/docker/"><img alt="Docker logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="https://images.tutorialedge.net/images/docker.svg" /> Docker</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/gamedev/"><img alt="GameDev logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="../../images/svg/logo.svg" /> GameDev</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/golang/"><img alt="Golang logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="https://images.tutorialedge.net/images/golang.svg" /> Golang</a>
                                </div>
                                <div class="col-sm-6">
                                    <a class="dropdown-item" href="https://cotutorial.github.io/nodejs/"><img alt="Nodejs logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="https://images.tutorialedge.net/images/javascript.svg" />
                                        NodeJS</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/python/"><img alt="Python logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="https://images.tutorialedge.net/images/python.svg" /> Python</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/rust/"> <img alt="Rust logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="https://images.tutorialedge.net/images/rust-logo.png" /> Rust</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/typescript/"><img
                                            alt="TypeScript logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="https://images.tutorialedge.net/images/typescript.svg" />
                                        TypeScript</a>
                                    <a class="dropdown-item" href="https://cotutorial.github.io/webdev/"><img alt="Web Dev logo"
                                            src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                            data-src="../../images/svg/logo.svg" /> Web Dev</a>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="../../blog/">Blog</a>
                    </li>
                    
                </ul>


                
                
                

            </div>
        </nav>

        
        <nav class="navbar secondary-nav navbar-expand-lg navbar-light bg-light">

            
            <button class="navbar-toggler text-white" type="button" data-toggle="collapse" data-target="#secondNav"
                aria-controls="secondNav" aria-expanded="false" aria-label="Toggle navigation">
                <img src="../../images/svg/hamburger.svg" alt="hamburger menu" />
            </button>

            <div class="collapse navbar-collapse justify-content-between" id="secondNav">
                <ul class="navbar-nav mr-auto">

                    
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/angular/"><img alt="angular logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/angular.svg" /> Angular</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/typescript/"><img alt="angular logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/typescript.png" /> TypeScript</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/cloud/"><img alt="cloud logo"
                                src="data:image/png.svg;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/cloud.svg" /> Cloud</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/python/"><img alt="python logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/python.svg" />Python</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/golang/"><img alt="golang logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/golang.svg" />Golang</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/rust/"><img alt="rust logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="https://images.tutorialedge.net/images/rust-logo.png" />Rust</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link" href="https://cotutorial.github.io/webdev/"><img alt="webdev logo"
                                src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="
                                data-src="../../images/svg/logo.svg" />Web Dev</a>
                    </li>
                </ul>
            </div>
        </nav>

<div class="top-bar">
    <div class="container">
        <h1>
            
            <img src="data:image/png;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=" data-src="https://images.tutorialedge.net/images/typescript.png" alt="Typescript REST API And MongoDB Beginners Tutorial Image" />  Typescript REST API And MongoDB Beginners Tutorial
        </h1>
        <div class="post-info">
            <div class="post-info-inner">
                <span>
            
            <img class="author" src="../../images/svg/logo.svg" alt="CoTutorial" />
            
            <a href="https://twitter.com/wisnusaputradev">CoTutorial</a>
          </span>

                <span><img class="icon" src="https://tutorialedge.net/images/svg/clock.svg" alt="clock"/>10 Minutes</span>
                <span><img class="icon" src="https://tutorialedge.net/images/svg/calendar.svg" alt="clock"/> Jun 10, 2018</span>

                <span>
            
            <a href="../../tags/typescript"
              ><span class="badge badge-pill badge-info">typescript</span></a>
                
            <a href="../../tags/mongodb"
              ><span class="badge badge-pill badge-info">mongodb</span></a>
                
                </span>
            </div>
        </div>
    </div>
</div>

<div class="container-fluid">
    <div class="content-container">
        <div class="row">

            <div class="d-none d-sm-none col-sm-3 d-md-block">
                <div class="sidebar">
                    <div id="sidebar small-no-show">

  <div class="right-sidebar youtube-subscribe">
    <h3>Site Sponsors</h3>
    <a href="#"><img class="patron" src="https://images.tutorialedge.net/images/DigitalOcean.png" style="width: 100%; height: auto; margin: 0; " alt="Amazing Site Sponsors!"/></a>
    <hr/>
    <h3>Support The Site</h3>
    <a href="#"><img class="patron" src="https://images.tutorialedge.net/images/patreon.png" alt="become a patron"/></a>
    <div class="clear"></div>
    <a href="#"><img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee" style="height: auto !important;width: auto !important;" ></a>
  </div>


  <div class="right-sidebar small-no-show">
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    <h4 style="text-transform: uppercase;">chai</h4>
    <ul class="collection">
      
      
      <li class="collection-item"><a href="https://cotutorial.github.io/typescript/testing-typescript-api-with-mocha-chai/">Testing a TypeScript API With Mocha and Chai</a></li>
      
      
    </ul>
    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    <h4 style="text-transform: uppercase;">express</h4>
    <ul class="collection">
      
      
      <li class="collection-item"><a href="https://cotutorial.github.io/typescript/typescript-socket-io-tutorial/">Getting Started with Typescript and Socket.Io - Tutorial</a></li>
      
      
      
      <li class="collection-item"><a href="https://cotutorial.github.io/typescript/creating-rest-api-express-typescript/">Building a RESTful API using Express and Typescript</a></li>
      
      
    </ul>
    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    <h4 style="text-transform: uppercase;">jest</h4>
    <ul class="collection">
      
      
      <li class="collection-item"><a href="https://cotutorial.github.io/typescript/testing-typescript-api-with-jest/">Testing Typescript Api With Jest and Supertest</a></li>
      
      
    </ul>
    
    

    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    <h4 style="text-transform: uppercase;">mocha</h4>
    <ul class="collection">
      
      
      <li class="collection-item"><a href="https://cotutorial.github.io/typescript/testing-typescript-api-with-mocha-chai/">Testing a TypeScript API With Mocha and Chai</a></li>
      
      
    </ul>
    
    

    
    
    
    
    
    
    
    
    
    

    
    <h4 style="text-transform: uppercase;">mongodb</h4>
    <ul class="collection">
      
      
      <li class="collection-item"><a href="https://cotutorial.github.io/typescript/typescript-mongodb-beginners-tutorial/">Typescript REST API And MongoDB Beginners Tutorial</a></li>
      
      
    </ul>
    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    

    
    

    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    
    
    

    
    

    
    
    
    

    
    
  </div>

</div>
                </div>
            </div>

            <div class="col-sm-9 col-md-7">
                <article class="content" v-pre>
                    

<blockquote>
<p><strong>Source Code</strong> - The full source code for this tutorial can be found here: <a href="https://github.com/TutorialEdge/TypeScript-MongoDB-REST-Tutorial">github.com/TutorialEdge/TypeScript-MongoDB-REST-Tutorial</a></p>
</blockquote>

<h1 id="introduction">Introduction</h1>

<p>In this tutorial, we&rsquo;ll be building a very simple REST API that will allow you
to store, query, update and delete books from a book table within your MongoDB
instance. This will hopefully cover everything you need to get a basic project
up yourself for your own side projects.</p>

<h1 id="prerequisites">Prerequisites</h1>

<p>In order to complete this tutorial, you are going to need the following:</p>

<ul>
<li><code>npm</code> or <code>yarn</code> installed on your machine. We&rsquo;ll be using <code>yarn</code> as our primary tool for dependency management, but <code>npm</code> does also work should you wish to use that instead.</li>
<li>The <code>tsc</code> cli installed on your machine, this can be done with either of these commands:

<ul>
<li><code>npm install -g typescript</code></li>
<li><code>yarn global add typescript</code></li>
</ul></li>
</ul>

<h1 id="setting-up-a-mongodb-database-with-docker">Setting Up A MongoDB Database with Docker</h1>

<p>For the purpose of this tutorial, I&rsquo;m going to be using <code>docker</code> in order to
quickly get a mongodb instance up and running on my local development machine.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-s" data-lang="s"><span style="color:#f92672">$</span> docker pull mongo
<span style="color:#f92672">$</span> docker run <span style="color:#f92672">--</span>name my_mongo <span style="color:#f92672">-</span>d <span style="color:#f92672">-</span>p <span style="color:#ae81ff">127.0.0.1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">27017</span><span style="color:#f92672">:</span><span style="color:#ae81ff">27017</span> mongo</code></pre></div>
<p>Note: If you already have a mongodb instance up and running then please feel
free to ignore this step and carry on using your own instance.</p>

<h1 id="setting-up-our-project">Setting up our Project</h1>

<p>Before we get started creating our TypeScript application, we&rsquo;ll first need to initialize our project. This can be done relatively easily with the help of the <code>tsc</code> command line tool:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">tsc --init</code></pre></div>
<p>This command will go and create a <code>tsconfig.json</code> file in the root of our project directory which will contain all of the default settings for compiling our TypeScript application into executable JavaScript.</p>

<p>Within this <code>tsconfig.json</code> file you will want to set the <code>outDir</code> to <code>dist/</code> and we&rsquo;ll want to specify the <code>sourceRoot</code> to <code>src/</code> and turn on <code>inlineSourceMap</code>. After doing that, your <code>tsconfig.json</code> file should look something like this:</p>

<blockquote>
<p><strong>Note</strong>: I&rsquo;ve removed all of the commented out fields to keep this short and easy to follow</p>
</blockquote>

<div class="filename">tsconfig.json</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#f92672">&#34;compilerOptions&#34;</span>: {
    <span style="color:#960050;background-color:#1e0010">/*</span> <span style="color:#960050;background-color:#1e0010">Basic</span> <span style="color:#960050;background-color:#1e0010">Options</span> <span style="color:#960050;background-color:#1e0010">*/</span>
    <span style="color:#f92672">&#34;target&#34;</span>: <span style="color:#e6db74">&#34;es5&#34;</span>,
    <span style="color:#f92672">&#34;module&#34;</span>: <span style="color:#e6db74">&#34;commonjs&#34;</span>,
    <span style="color:#f92672">&#34;outDir&#34;</span>: <span style="color:#e6db74">&#34;./dist&#34;</span>,
    <span style="color:#960050;background-color:#1e0010">/*</span> <span style="color:#960050;background-color:#1e0010">Strict</span> <span style="color:#960050;background-color:#1e0010">Type-Checking</span> <span style="color:#960050;background-color:#1e0010">Options</span> <span style="color:#960050;background-color:#1e0010">*/</span>
    <span style="color:#f92672">&#34;strict&#34;</span>: <span style="color:#66d9ef">true</span>,      
    <span style="color:#f92672">&#34;esModuleInterop&#34;</span>: <span style="color:#66d9ef">true</span>,
    <span style="color:#960050;background-color:#1e0010">/*</span> <span style="color:#960050;background-color:#1e0010">Source</span> <span style="color:#960050;background-color:#1e0010">Map</span> <span style="color:#960050;background-color:#1e0010">Options</span> <span style="color:#960050;background-color:#1e0010">*/</span>
    <span style="color:#f92672">&#34;sourceRoot&#34;</span>: <span style="color:#e6db74">&#34;./src&#34;</span>,
    <span style="color:#f92672">&#34;inlineSourceMap&#34;</span>: <span style="color:#66d9ef">true</span>
  }
}</code></pre></div>
<p>With this initialized, we&rsquo;ll also have to initialize a new <code>package.json</code> file. This can be done by calling:</p>

<pre><code>yarn init
</code></pre>

<p>The <code>package.json</code> file will contain all of our TypeScript project&rsquo;s dependencies.</p>

<h1 id="our-typescript-application">Our TypeScript Application</h1>

<p>Our TypeScript application is going to simply expose a simple REST API that will
allow us to perform basic CRUD on our MongoDB table. We&rsquo;ll be creating a table
that will contain a list of technical books and some attributes about said
books.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># rough book schema</span>
<span style="color:#f92672">[</span>
  <span style="color:#f92672">{</span> <span style="color:#e6db74">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;Learning Concurrency in Python&#34;</span> <span style="color:#f92672">}</span>,
  <span style="color:#f92672">{</span> <span style="color:#e6db74">&#34;title&#34;</span>: <span style="color:#e6db74">&#34;An Introduction to Cloud Development&#34;</span> <span style="color:#f92672">}</span>
  ...
<span style="color:#f92672">]</span></code></pre></div>
<p>Now, MongoDB is a non-relational database so if we wish to add new fields like
an author, some comments or the book&rsquo;s rating then we can certainly do so in the
future. This will be enough for us to get started with right now though.</p>

<h1 id="our-base-rest-api">Our Base REST API</h1>

<p>So, to get started, we&rsquo;ll need to create a very simple REST API that will expose
5 distinct API endpoints:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">-</span> GET <span style="color:#f92672">-</span> <span style="color:#f92672">/</span>books <span style="color:#75715e"># returns all books</span>
<span style="color:#f92672">-</span> GET <span style="color:#f92672">-</span> <span style="color:#f92672">/</span>book<span style="color:#f92672">/</span><span style="color:#ae81ff">1</span> <span style="color:#75715e"># returns a book with id 1</span>
<span style="color:#f92672">-</span> POST <span style="color:#f92672">-</span> <span style="color:#f92672">/</span>book <span style="color:#75715e"># inserts a new book into the table</span>
<span style="color:#f92672">-</span> DELETE <span style="color:#f92672">-</span> <span style="color:#f92672">/</span>book<span style="color:#f92672">/</span><span style="color:#ae81ff">1</span> <span style="color:#75715e"># deletes a book with id of 1</span>
<span style="color:#f92672">-</span> PUT <span style="color:#f92672">-</span> <span style="color:#f92672">/</span>book<span style="color:#f92672">/</span><span style="color:#ae81ff">1</span> <span style="color:#75715e"># updates a book with id of 1</span></code></pre></div>
<p>This doesn&rsquo;t look too bad, 5 distinct endpoints, nothing we haven&rsquo;t done before!</p>

<h1 id="our-project-file-structure">Our Project File Structure</h1>

<p>Let&rsquo;s have a look at the project structure for the REST API that we&rsquo;ll be
building. We&rsquo;ll need a main entry point which will be our <code>app.ts</code> file, this
will handle our API config and starting the server on a given port.</p>

<p>We&rsquo;ll next be building up a <code>bookController.ts</code> file which will contain all of
the REST API endpoints that we defined above. It&rsquo;ll be within this file that
we&rsquo;ll put the code for interacting with our mongodb instance.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-py" data-lang="py"><span style="color:#f92672">-</span> src<span style="color:#f92672">/</span>
<span style="color:#f92672">-</span> <span style="color:#f92672">-</span> controllers<span style="color:#f92672">/</span>
<span style="color:#f92672">-</span> <span style="color:#f92672">-</span> <span style="color:#f92672">-</span> bookController<span style="color:#f92672">.</span>ts
<span style="color:#f92672">-</span> <span style="color:#f92672">-</span> app<span style="color:#f92672">.</span>ts
<span style="color:#f92672">-</span> <span style="color:#f92672">-</span> book<span style="color:#f92672">.</span>ts
<span style="color:#f92672">-</span> tsconfig<span style="color:#f92672">.</span>json
<span style="color:#f92672">-</span> package<span style="color:#f92672">.</span>json
<span style="color:#f92672">-</span> node_modules<span style="color:#f92672">/</span>
<span style="color:#f92672">-</span> dist<span style="color:#f92672">/</span> <span style="color:#75715e"># all of our built ts files get put here by the compiler</span></code></pre></div>
<p>let&rsquo;s initialize this project now by creating a new directory to work in and
running <code>yarn init</code>. Once we have successfully initialized our project, we need
to install both <code>express</code> and <code>@types/express</code> like so:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-s" data-lang="s"><span style="color:#f92672">$</span> yarn add express <span style="color:#f92672">@</span>types<span style="color:#f92672">/</span>express</code></pre></div>
<p>We&rsquo;ll also want to install the <code>concurrently</code> library so that we can run and
rebuild any changes we make to our TypeScript based API without having to go
back into the command line.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-s" data-lang="s"><span style="color:#f92672">$</span> yarn add concurrently nodemon</code></pre></div>
<p>Within our <code>package.json</code> file we&rsquo;ll now have to add the following <code>scripts</code>:</p>

<div class="filename">package.json</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">{
  <span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">clipped</span>
  <span style="color:#f92672">&#34;scripts&#34;</span>: {
    <span style="color:#f92672">&#34;watch-ts&#34;</span>: <span style="color:#e6db74">&#34;tsc -w&#34;</span>,
    <span style="color:#f92672">&#34;watch-node&#34;</span>: <span style="color:#e6db74">&#34;nodemon dist/app.js&#34;</span>,
    <span style="color:#f92672">&#34;watch&#34;</span>: <span style="color:#e6db74">&#34;concurrently -k -p \&#34;[{name}]\&#34; -n \&#34;TypeScript, Node\&#34; -c \&#34;yello.bold, cyan.bold\&#34; \&#34;yarn run watch-ts\&#34; \&#34;yarn run watch-node\&#34;&#34;</span>
  }
  <span style="color:#960050;background-color:#1e0010">//</span> <span style="color:#960050;background-color:#1e0010">clipped</span>
}</code></pre></div>
<p>We can now build and run our application by typing <code>yarn run watch</code> into our
terminal. At this stage, not a lot should happen, as we don&rsquo;t yet have any code!
Let&rsquo;s go and fix this now!</p>

<h1 id="our-app-ts-file">Our app.ts File</h1>

<p>Let&rsquo;s start off by creating a really simple <code>express</code> based server that returns
<code>hi</code> when we hit the <code>/</code>.</p>

<div class="filename">app.ts</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">express</span>, { <span style="color:#a6e22e">Request</span>, <span style="color:#a6e22e">Response</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;express&#34;</span>;

<span style="color:#75715e">// Our Express APP config
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">express</span>();
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">use</span>(<span style="color:#a6e22e">express</span>.<span style="color:#a6e22e">json</span>());
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#34;port&#34;</span>, <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">PORT</span> <span style="color:#f92672">||</span> <span style="color:#ae81ff">3000</span>);

<span style="color:#75715e">// API Endpoints
</span><span style="color:#75715e"></span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;/&#34;</span>, (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span> <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#34;hi&#34;</span>));

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">server</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">listen</span>(<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;port&#34;</span>), () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;App is running on http://localhost:%d&#34;</span>, <span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;port&#34;</span>));
});</code></pre></div>
<p>If we save this and kick off our <code>yarn run watch</code> script, you should see that
this will successfully start up a really simple server on
<code>http://localhost:3000</code> that returns <code>hi</code>.</p>

<p>Excellent, we now have a good base on top of which we can build our MongoDB
based REST API!</p>

<h1 id="our-bookcontroller-ts-file">Our bookController.ts File</h1>

<p>Ok, so let&rsquo;s start fleshing out our API and subsequently the functions within our <code>bookController.ts</code> file we want to expose.</p>

<div class="filename">bookController.ts</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Request</span>, <span style="color:#a6e22e">Response</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;express&#34;</span>;

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">allBooks</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#34;Returns all Books&#34;</span>);
};

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getBook</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#34;Returns one book&#34;</span>);
};

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">deleteBook</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#34;Returns one book&#34;</span>);
};

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">updateBook</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#34;Returns one book&#34;</span>);
};

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">addBook</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#34;Returns one book&#34;</span>);
};</code></pre></div>
<p>Within our <code>app.ts</code> file, we&rsquo;ll now want to map these functions up to a
corresponding endpoint:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#66d9ef">import</span> <span style="color:#a6e22e">express</span>, { <span style="color:#a6e22e">Request</span>, <span style="color:#a6e22e">Response</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;express&#34;</span>;

<span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">bookController</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;./controllers/bookController&#34;</span>;

<span style="color:#75715e">// Our Express APP config
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">app</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">express</span>();
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">set</span>(<span style="color:#e6db74">&#34;port&#34;</span>, <span style="color:#a6e22e">process</span>.<span style="color:#a6e22e">env</span>.<span style="color:#a6e22e">PORT</span> <span style="color:#f92672">||</span> <span style="color:#ae81ff">3000</span>);

<span style="color:#75715e">// API Endpoints
</span><span style="color:#75715e"></span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;/&#34;</span>, (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#34;hi&#34;</span>))

<span style="color:#75715e">// API Endpoints
</span><span style="color:#75715e"></span><span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;/books&#34;</span>, <span style="color:#a6e22e">bookController</span>.<span style="color:#a6e22e">allBooks</span>);
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;/book/:id&#34;</span>, <span style="color:#a6e22e">bookController</span>.<span style="color:#a6e22e">getBook</span>);
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">post</span>(<span style="color:#e6db74">&#34;/book&#34;</span>, <span style="color:#a6e22e">bookController</span>.<span style="color:#a6e22e">addBook</span>);
<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">put</span>(<span style="color:#e6db74">&#34;/book/:id&#34;</span>, <span style="color:#a6e22e">bookController</span>.<span style="color:#a6e22e">updateBook</span>);
<span style="color:#a6e22e">app</span>.<span style="color:#66d9ef">delete</span>(<span style="color:#e6db74">&#34;/book/:id&#34;</span>, <span style="color:#a6e22e">bookController</span>.<span style="color:#a6e22e">deleteBook</span>);

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">server</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">listen</span>(<span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;port&#34;</span>), () <span style="color:#f92672">=&gt;</span> {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;App is running on http://localhost:%d&#34;</span>, <span style="color:#a6e22e">app</span>.<span style="color:#a6e22e">get</span>(<span style="color:#e6db74">&#34;port&#34;</span>));
});</code></pre></div>
<p>Excellent, we have now defined all of the API Endpoints we had in mind. It&rsquo;s now
time to work on integrating this with MongoDB!</p>

<h1 id="integrating-with-mongodb">Integrating with MongoDB</h1>

<p>The first thing we&rsquo;ll need to do is import a new library that will allow us to
not only connect to our MongoDB instance, but to also do cool things such as
insert new books, query those books and whatever else we wish to do.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-s" data-lang="s"><span style="color:#f92672">$</span> yarn add mongoose <span style="color:#f92672">@</span>types<span style="color:#f92672">/</span>mongoose</code></pre></div>
<p>The <code>mongoose</code> library has been around since the dawn of MongoDB. I can remember
it being the number one choice years ago and it hasn&rsquo;t changed since.</p>

<p><code>mongoose</code> allows you to work with models, much like Hibernate if you are coming
from Java.</p>

<div class="filename">book.ts</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#66d9ef">import</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">mongoose</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;mongoose&#34;</span>;

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">uri</span>: <span style="color:#66d9ef">string</span> <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;mongodb://127.0.0.1:27017/local&#34;</span>;

<span style="color:#a6e22e">mongoose</span>.<span style="color:#a6e22e">connect</span>(<span style="color:#a6e22e">uri</span>, (<span style="color:#a6e22e">err</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">err</span>.<span style="color:#a6e22e">message</span>);
  } <span style="color:#66d9ef">else</span> {
    <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#e6db74">&#34;Successfully Connected!&#34;</span>);
  }
});

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">interface</span> <span style="color:#a6e22e">IBook</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">mongoose</span>.<span style="color:#a6e22e">Document</span> {
  <span style="color:#a6e22e">title</span>: <span style="color:#66d9ef">string</span>;
  <span style="color:#a6e22e">author</span>: <span style="color:#66d9ef">number</span>;
}

<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">const</span> <span style="color:#a6e22e">BookSchema</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">mongoose</span>.<span style="color:#a6e22e">Schema</span>({
  <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">type</span>: <span style="color:#66d9ef">String</span>, <span style="color:#a6e22e">required</span>: <span style="color:#66d9ef">true</span> },
  <span style="color:#a6e22e">author</span><span style="color:#f92672">:</span> { <span style="color:#a6e22e">type</span>: <span style="color:#66d9ef">String</span>, <span style="color:#a6e22e">required</span>: <span style="color:#66d9ef">true</span> }
});

<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Book</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">mongoose</span>.<span style="color:#a6e22e">model</span><span style="color:#f92672">&lt;</span><span style="color:#a6e22e">IBook</span><span style="color:#f92672">&gt;</span>(<span style="color:#e6db74">&#34;Book&#34;</span>, <span style="color:#a6e22e">BookSchema</span>);
<span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> <span style="color:#a6e22e">Book</span>;</code></pre></div>
<p>Within our book controller, we&rsquo;ll now want to create the 5 distinct functions
that we&rsquo;ve previously mapped to an endpoint within our <code>app.ts</code> file.</p>

<div class="filename">controllers/bookController.ts</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#75715e">// controllers/bookController.ts
</span><span style="color:#75715e"></span><span style="color:#66d9ef">import</span> { <span style="color:#a6e22e">Request</span>, <span style="color:#a6e22e">Response</span> } <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;express&#34;</span>;
<span style="color:#66d9ef">import</span> <span style="color:#a6e22e">Book</span> <span style="color:#a6e22e">from</span> <span style="color:#e6db74">&#34;./../book&#34;</span>;

<span style="color:#75715e">// We&#39;ll start with allBooks which will return
</span><span style="color:#75715e">// every we have from our database
</span><span style="color:#75715e"></span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">allBooks</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">books</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Book</span>.<span style="color:#a6e22e">find</span>((<span style="color:#a6e22e">err</span>: <span style="color:#66d9ef">any</span>, <span style="color:#a6e22e">books</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
      <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#34;Error!&#34;</span>);
    } <span style="color:#66d9ef">else</span> {
      <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">books</span>);
    }
  });
};</code></pre></div>
<p>Next, we&rsquo;ll want to use the <code>findById()</code> function in order to query our database
for a particular book based of an <code>id</code> that is passed in via a path parameter.
i.e. <code>http://localhost:3000/book/my-unique-book-id</code> where <code>my-unique-book-id</code>
will be an alphanumeric string.</p>

<div class="filename">controllers/bookController.ts</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">getBook</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">book</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Book</span>.<span style="color:#a6e22e">findById</span>(<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">id</span>, (<span style="color:#a6e22e">err</span>: <span style="color:#66d9ef">any</span>, <span style="color:#a6e22e">book</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
      <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">err</span>);
    } <span style="color:#66d9ef">else</span> {
      <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">book</span>);
    }
  });
};</code></pre></div>
<p>Our <code>deleteBook</code> function will look much like our <code>getBook</code> function in the
sense that it takes in a path parameter <code>id</code> value and uses that to dictate what
row to delete from our database. We pass this <code>id</code> into the <code>deleteOne()</code>
function and specify the callback function we wish to invoke once this has
completed.</p>

<div class="filename">controllers/bookController.ts</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">deleteBook</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">book</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Book</span>.<span style="color:#a6e22e">deleteOne</span>({ <span style="color:#a6e22e">_id</span>: <span style="color:#66d9ef">req.params.id</span> }, (<span style="color:#a6e22e">err</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
      <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">err</span>);
    } <span style="color:#66d9ef">else</span> {
      <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#34;Successfully Deleted Book&#34;</span>);
    }
  });
};</code></pre></div>
<p>The <code>updateBook</code> function will this time use the <code>findByIdAndUpdate()</code> mongoose
function in order to find a specific book and then update that based off the
JSON block we send within the body of our <code>HTTP</code> request:</p>

<div class="filename">controllers/bookController.ts</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">updateBook</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">body</span>);
  <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">book</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">Book</span>.<span style="color:#a6e22e">findByIdAndUpdate</span>(
    <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">params</span>.<span style="color:#a6e22e">id</span>,
    <span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">body</span>,
    (<span style="color:#a6e22e">err</span>: <span style="color:#66d9ef">any</span>, <span style="color:#a6e22e">book</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
      <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
        <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">err</span>);
      } <span style="color:#66d9ef">else</span> {
        <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#e6db74">&#34;Successfully updated book!&#34;</span>);
      }
    }
  );
};</code></pre></div>
<p>And finally, the <code>addBook</code> function will simply insert a new book object into
our MongoDB database. We&rsquo;ll pass in the <code>title</code> and the <code>author</code> we wish in a
<code>json</code> object within our <code>PUT</code> requests&rsquo; body. If the <code>json</code> object we pass in
doesn&rsquo;t have these two fields as a minimum then it&rsquo;ll fail and return an error!</p>

<div class="filename">controllers/bookController.ts</div>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ts" data-lang="ts"><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">addBook</span> <span style="color:#f92672">=</span> (<span style="color:#a6e22e">req</span>: <span style="color:#66d9ef">Request</span>, <span style="color:#a6e22e">res</span>: <span style="color:#66d9ef">Response</span>) <span style="color:#f92672">=&gt;</span> {
  <span style="color:#66d9ef">var</span> <span style="color:#a6e22e">book</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Book</span>(<span style="color:#a6e22e">req</span>.<span style="color:#a6e22e">body</span>);

  <span style="color:#a6e22e">book</span>.<span style="color:#a6e22e">save</span>((<span style="color:#a6e22e">err</span>: <span style="color:#66d9ef">any</span>) <span style="color:#f92672">=&gt;</span> {
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">err</span>) {
      <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">err</span>);
    } <span style="color:#66d9ef">else</span> {
      <span style="color:#a6e22e">res</span>.<span style="color:#a6e22e">send</span>(<span style="color:#a6e22e">book</span>);
    }
  });
};</code></pre></div>
<h1 id="running-our-project">Running our Project</h1>

<p>Now, we should be done with our programming section of this tutorial, it&rsquo;s time
to run this and try and test it by throwing a few HTTP Requests at it. We can
again run our REST API by calling the following command:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-s" data-lang="s"><span style="color:#f92672">$</span> yarn run watch
[ Node] [nodemon] restarting due to changes...
[ Node] [nodemon] starting <span style="color:#e6db74">`node dist/server.js`</span>
[ Node] App is running on http<span style="color:#f92672">://</span>localhost<span style="color:#f92672">:</span><span style="color:#ae81ff">3000</span> <span style="color:#66d9ef">in</span> development <span style="color:#66d9ef">mode</span>
[ Node] Connected to MongoDb</code></pre></div>
<p>Once this is up and running, I encourage you to play around using something like
Postman in order to hit your API with a number of different HTTP requests and do
things like populate your database, update any entries and just get used to
interacting with it in general.</p>

<h1 id="conclusion">Conclusion</h1>

<p>Hopefully you found this tutorial useful! If you did then I&rsquo;d love to hear your
feedback on twitter: <a href="https://twitter.com/wisnusaputradev">@wisnusaputradev</a>.</p>

<p>If you need any further help then please feel free to let me know in the
comments section below!</p>

<h2 id="further-reading">Further Reading</h2>

<p>If you enjoyed this article then you may also enjoy some of these posts on our site:</p>

<ul>
<li><a href="https://tutorialedge.net/typescript/testing-typescript-api-with-mocha-chai/">Testing a TypeScript API with Mocha and Chai</a></li>
</ul>
 
<div class="author-container">
  <div class="author-image">
    
    <img src="../../images/svg/logo.svg" alt="CoTutorial" />
    
  </div>
  <div class="author-info">
    <h2>
      CoTutorial<br />
      <small
        >Twitter: <a href="https://twitter.com/wisnusaputradev">@CoTutorial</a></small
      >
    </h2>
    <p>
      Hey, I'm Elliot and I've been working on TutorialEdge for the last 4 years! If my work has helped you in any way, shape, or form then please consider supporting my work.
    </p>

    <a style="float: left; margin-right: 10px;" href="#"><img class="patron" src="https://images.tutorialedge.net/images/patreon.png" alt="become a patron"/></a>
    <a style="float: left;" href="#"><img src="https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png" alt="Buy Me A Coffee" style="height: auto !important;width: auto !important;" ></a>
    
  </div>
</div>


                </article>
                <div class="comments">
          <div class="content">
    
    
    

    <script>
        function loadAPI() {
            var js = document.createElement('script');
            js.src = '//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v4.0&appId=493615514813695&autoLogAppEvents=1';
            document.body.appendChild(js);
        }
        window.onscroll = function () {
            var rect = document.getElementById('comments').getBoundingClientRect();
            if (rect.top < window.innerHeight) {
                loadAPI();
                window.onscroll = null;
            } 
        }
        </script>
    <div id="fb-root"></div>
    <div class="fb-comments comments" id="comments" data-href="https://cotutorial.github.io/typescript/typescript-mongodb-beginners-tutorial/" data-width="100%" data-numposts="5"></div>                  
</div>

        </div>
            </div>

            <div class="col-sm-3 col-md-2">
                <div id="right-sidebar">
                    <div class="toc">
                        <h4>Table Of Contents</h4>
                        <nav id="TableOfContents">
<ul>
<li><a href="#introduction">Introduction</a></li>
<li><a href="#prerequisites">Prerequisites</a></li>
<li><a href="#setting-up-a-mongodb-database-with-docker">Setting Up A MongoDB Database with Docker</a></li>
<li><a href="#setting-up-our-project">Setting up our Project</a></li>
<li><a href="#our-typescript-application">Our TypeScript Application</a></li>
<li><a href="#our-base-rest-api">Our Base REST API</a></li>
<li><a href="#our-project-file-structure">Our Project File Structure</a></li>
<li><a href="#our-app-ts-file">Our app.ts File</a></li>
<li><a href="#our-bookcontroller-ts-file">Our bookController.ts File</a></li>
<li><a href="#integrating-with-mongodb">Integrating with MongoDB</a></li>
<li><a href="#running-our-project">Running our Project</a></li>
<li><a href="#conclusion">Conclusion</a>
<ul>
<li><a href="#further-reading">Further Reading</a></li>
</ul></li>
</ul>
</nav>
                    </div>
                    <hr/>
                    <div id="codefund">
                        
                    </div>
                    <script src="https://codefund.io/properties/330/funder.js" async="async"></script>
                    <div class="clear"></div>
                </div>
            </div>

        </div>
    </div>
</div>


<script src="../../js/sticky-sidebar.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/anchor-js/3.2.0/anchor.min.js"></script>
<script>
    
    document.addEventListener("DOMContentLoaded", function(event) {
        var sidebar = new StickySidebar("#right-sidebar", {
            topSpacing: 10
        });
        anchors.options = {
            visible: "always",
            placement: "left"
        };
        anchors.add(
            ".content > h1, .content > h2, .content > h3, .content > h4"
        );
    });
</script>


<div class="blue-spacer"></div>

<footer class="page-footer">
    <div class="row">
        <div class="col l3 m6 s12">
            <div class="padded">
                <h3>Courses</h3>
                <ul>
                    <li><a href="https://cotutorial.github.io/python/">Python</a></li>
                    <li><a href="https://cotutorial.github.io/angular/">Angular</a></li>
                    <li><a href="https://cotutorial.github.io/golang/">Golang</a></li>
                    <li><a href="https://cotutorial.github.io/artificial-intelligence/">Artificial Intelligence</a></li>
                    <li><a href="https://cotutorial.github.io/webdev/">Web Development</a></li>
                </ul>
            </div>
        </div>
        <div class="col l3 m6 s12">
            <div class="padded">
                <h3>Quick Links</h3>

                <ul>
                    <li><a href="https://cotutorial.github.io/search/">Search Page</a></li>
                    <li><a href="https://cotutorial.github.io/about/">About</a></li>
                    <li><a href="https://cotutorial.github.io/get-involved/">Get Involved</a></li>
                </ul>
                <h3>Suggested Resources</h3>
                <ul>
                    <li><a href="https://cotutorial.github.io/uses/">My Hardware + Software Recording Setup </a></li>
                </ul>
            </div>
        </div>
        <div class="col l3 m6 s12">
            <div class="padded">
                <h3>Follow Me</h3>
                <ul>
                    <li><a href="https://twitter.com/wisnusaputradev">@wisnusaputradev</a></li>
                    <li><a href="https://www.facebook.com/wisnusaputradev">Wisnu Saputra</a></li>
                    <li><a href="https://github.com/saputrago">saputrago</a></li>
                </ul>
            </div>
        </div>
        <div class="col l3 m12 s12 footer-special">
            <div class="logo">
                <a href="https://cotutorial.github.io/"><img alt="tutorialedge logo" src="../../images/svg/logo.svg" /> CoTutorial</a>
            </div>
            <div class="padded">
                <p>CoTutorial is a totally free programming tutorial site that has been built with the intention of helping as many people as possible learn to program. The site is also completely opensourced and you can contribue here: <a href="https://github.com/saputrago">Project</a>,
                    any pull requests will be greatly appreciated!</p>
            </div>
        </div>
    </div>
    <div class="footer-copyright none">
        <span class="float-left">CoTutorial  2019 Copyright</span>
        <span class="float-right" id="page-id">e2152c74a14b04838706f4b50b84ee61</span>
    </div>
</footer>



<script async src="https://www.googletagmanager.com/gtag/js?id=UA-10255990-23"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }
    gtag('js', new Date());

    gtag('config', 'UA-10255990-23');
</script>
<script type="text/javascript">
    function init() {
        var imgDefer = document.getElementsByTagName('img');
        
        
        
        
        
        for (var i = 0; i < imgDefer.length; i++) {
            if (imgDefer[i].getAttribute('data-src')) {
                imgDefer[i].setAttribute('src', imgDefer[i].getAttribute('data-src'));
            }
        }

    }

    window.onload = init;
</script>

</div>
</body>

</html>